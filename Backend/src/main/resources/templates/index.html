<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

    <form th:action="@{/logout}" method="post" th:hidden="false" name="logoutForm">
        <input type="submit" value="Logout"/>
    </form>

    <a th:href="@{/admin/users/export/csv}" title="Export to CSV">Export to CSV</a>
    <a th:href="@{/admin/users}"><button>Create new user</button></a>

    <table>
        <tr>
            <th>Id</th>
            <th> <a th:href="@{'/admin/users/page/' + ${currentPage} + '?sortField=' + 'firstName' + '&sortDir=' + ${sortDir == 'firstName' ? sortDir : reverseSortDir} + ${keyword != null ? '&keyword=' + keyword : ''}}">First Name</a></th>
            <th> <a th:href="@{'/admin/users/page/' + ${currentPage} + '?sortField=' + 'lastName' + '&sortDir=' + ${sortDir == 'lastName' ? sortDir : reverseSortDir} + ${keyword != null ? '&keyword=' + keyword : ''}}">Last Name</a></th>
            <th> <a th:href="@{'/admin/users/page/' + ${currentPage} + '?sortField=' + 'email' + '&sortDir=' + ${sortDir == 'email' ? sortDir : reverseSortDir} + ${keyword != null ? '&keyword=' + keyword : ''}}">Email</a></th>
            <th> <a th:href="@{'/admin/users/page/' + ${currentPage} + '?sortField=' + 'role' + '&sortDir=' + ${sortDir == 'role' ? sortDir : reverseSortDir} + ${keyword != null ? '&keyword=' + keyword : ''}}">Role</a></th>
            <th> <a th:href="@{'/admin/users/page/' + ${currentPage} + '?sortField=' + 'enabled' + '&sortDir=' + ${sortDir == 'enabled' ? sortDir : reverseSortDir} + ${keyword != null ? '&keyword=' + keyword : ''}}">Enabled</a></th>

        </tr>
        <tr th:each="user : ${userList}">
            <td>[[${user.id}]]</td>
            <td>[[${user.firstName}]]</td>
            <td>[[${user.lastName}]]</td>
            <td class="hideable-column">[[${user.email}]]</td>
            <td>[[${user.role.name}]]</td>
            <td>
                <a th:if="${user.enabled == true}">Enabled</a>
                <a th:if="${user.enabled == false}">Disabled</a>
            </td>
            <td>
                <a th:href="@{'/admin/users/edit/' + ${user.id}}" title="Edit this user">Edit</a>
                <a th:href="@{'/admin/users/delete/' + ${user.id}}" th:userId="${user.id}" title="Delete this user">Delete</a>
            </td>
        </tr>
    </table>

    <div th:if="${totalPages} > 1">
        <nav>
            <ul class="pagination justify-content-center flex-wrap">
                <li th:if="${currentPage > 1}">
                    <a th:href="@{'/admin/users/page/' + ${1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + ${keyword != null ? '&keyword=' + keyword : ''}}">First</a>
                </li>
                <li th:if="${currentPage > 1}">
                    <a th:href="@{'/admin/users/page/' + ${currentPage - 1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + ${keyword != null ? '&keyword=' + keyword : ''}}">Previous</a>
                </li>
<!--                <li th:class="${currentPage != i} ? 'page-item': 'page-item active'"-->
<!--                    th:each="i : ${#numbers.sequence(1, totalPages)}">-->
<!--                    <a th:replace="fragments :: page_link(${i}, ${i})"></a>-->
<!--                </li>-->
                <li th:if="${currentPage != totalPages}">
                    <a th:href="@{'/admin/users/page/' + ${currentPage + 1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + ${keyword != null ? '&keyword=' + keyword : ''}}">Next</a>
                </li>
                <li th:if="${currentPage != totalPages}">
                    <a th:href="@{'/admin/users/page/' + ${totalPages} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + ${keyword != null ? '&keyword=' + keyword : ''}}">Last</a>
                </li>
            </ul>
        </nav>
    </div>

</body>
</html>